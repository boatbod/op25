<!DOCTYPE html>
<html>

<head>
	<title>OP25</title>
	<link rel="stylesheet" type="text/css" href="main.css">
	<script src="config.js"></script>
	<script src="main.js"></script>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
</head>


<body style="background-color: #111; color: #E0E0E0; font-family: Arial, Helvetica, sans-serif;" onload="javascript:do_onload();">
 
<!--  START OF 2-COLUMN LAYOUT -->
   <div class="row">   <!--  START OF 2 COLUMN LAYOUT -->
   <div class="column" style="width: 750px;"> <!-- START FIRST COLUMN -->
  
		<div class="top-nav-container">
		  <div class="top-nav">
			<div class="nav-left">
			  <a href="#" class="nav-item" id="btn-home" onclick="showHome();">Home</a>
			  <a href="#" class="nav-item" id="btn-plot" onclick="toggleDivById('plot-container', 'btn-plot')">Plot</a>
			  <a href="#" class="nav-item" id="btn-settings" onclick="toggleDivById('settings-container', 'btn-settings')">Settings</a>
			  <a href="legacy-index.html" class="nav-item" id="btn-legacy">Legacy UI</a>        
			  <a href="#" class="nav-item" id="btn-about" onclick="toggleDivById('about-container', 'btn-about')">About</a>
			</div>
			<div class="nav-right">
			  <!-- SVG Logo -->
			  <svg class="logo" viewBox="0 0 300 100" xmlns="http://www.w3.org/2000/svg">
				<rect width="300" height="100" fill="#222" rx="10" />
				<polygon points="50,70 70,30 90,70" fill="#66aaff" />             <!-- the sail -->
				<rect x="50" y="70" width="40" height="5" fill="#ffaa55" rx="2" /> <!-- orange boat -->
				<text x="110" y="50" fill="#ffffff" font-size="32" font-family="Arial, sans-serif" font-weight="bold">O P 2 5</text>
				<text x="110" y="75" fill="#ccc" font-size="24" font-family="Arial, sans-serif">b o a t b o d</text>
			  </svg>
			</div>
		  </div>
		</div>

      <table class="outer-table" id="about-container" style="display: none; text-align:left;">
		<tr>
		<td>
		<div id="div_about_">
				<span class="copyr"> &copy; 2017-2024 Max H. Parke & Graham J. Norbury [boatbod version]<span>
				<br><br>
				JavaScript UI Updates, Michael Rose, 2025
				<br><br>
				This program comes with ABSOLUTELY NO WARRANTY.<br>
				OP25 is free software, and you are welcome to redistribute it under certain conditions.<br>
				For further details refer to the "License" link (below).
			<p>
			<table border=0>
			<tr><td>License:</td><td><a href="https://www.gnu.org/licenses/gpl-3.0.en.html" target="_blank">https://www.gnu.org/licenses/gpl-3.0.en.html</a></td></tr>

			<tr><td>Download:</td><td><tt>git clone https://git.osmocom.org/op25 &nbsp&nbsp&nbsp<a href='https://gitea.osmocom.org/op25/op25?h=master' target="_blank">[original]</a><br>git clone https://github.com/boatbod/op25 <a href='https://github.com/boatbod/op25' target="_blank">[boatbod fork]</a></tt></td></tr>
			<tr><td>Web site:</td><td><a href="http://op25.osmocom.org" target="_blank3">http://op25.osmocom.org</a></td></tr>
			</table>
			<br>
		</div>
		</td></tr>
		</table>
		
<table class="outer-table" id="settings-container" style="display: none; text-align:left;">
  <tr>
    <!-- LEFT COLUMN -->
    <td style="vertical-align: top; width: 50%; padding-right: 20px;">

      <div style="margin-bottom: 10px;">
        <button class="small-button" id="s2_ch_dmp" onclick="f_dump_button(0);">Log Talkgroups</button>
        <div style="color: #ccc;">Log talkgroups to stderr2</div>
      </div>

      <div style="margin-bottom: 10px;">
        <button class="small-button" onclick="f_scan_button('set_debug');">Log Verbosity</button>
        <div style="color: #ccc;">Set logging level</div>
      </div>

      <div class="s2_cell_h" id="s2_ch_cap" style="display: none; margin-bottom: 10px;">
        <button class="small-button" id="cap_bn" onclick="f_cap_button(0);">Start Capture</button>
      </div>

      <div class="s2_cell_h" id="s2_ch_trk" style="display: none; margin-bottom: 10px;">
        <button class="small-button" id="trk_bn" onclick="f_trk_button(-1);">Tracking</button>
      </div>

      <div style="margin-bottom: 10px;">
        <button class="small-button" onclick="f_scan_button('lockout');">Blacklist TGID</button>
        <button class="small-button" style="margin-left: 10px;" onclick="f_scan_button('whitelist');">Whitelist TGID</button>
      </div>

      <div style="margin-bottom: 15px;">
        <label for="callHeightControl" style="color: #ccc;">Call History Height (px):</label><br>
        <input type="number" id="callHeightControl" min="200" max="1000" value="500" style="width: 80px;">
      </div>

      <div style="margin-bottom: 15px;">
        <label for="plotSizeControl" style="color: #ccc;">Plot Image Width (px):</label><br>
        <input type="number" id="plotSizeControl" min="100" max="1000" value="300" style="width: 80px;">
      </div>
    </td>

    <!-- RIGHT COLUMN -->
    <td style="vertical-align: top; width: 50%; padding-left: 20px;">

      <div style="margin-bottom: 15px;">
        <label for="radioIdFreqTable" style="color: #ccc;">
          <input type="checkbox" id="radioIdFreqTable">
          Show Radio ID in Frequency Table
        </label>
      </div> 


      <div style="margin-bottom: 15px;">
        <label for="adjacentSitesToggle" style="color: #ccc;">
          <input type="checkbox" id="adjacentSitesToggle" checked>
          Show Adjacent Sites
        </label>
      </div>    
      
      <div style="margin-bottom: 15px;">
        <label for="callHistoryToggle" style="color: #ccc;">
          <input type="checkbox" id="callHistoryToggle" checked>
          Show Call History
        </label>
      </div>
        

	<div style="margin: 5px 0; text-align: left;">
	  <label for="callHistorySource" style="color: #ccc;">Call History Source:</label>
	  <select id="callHistorySource" style="margin-left: 5px;">
		<option value="frequency">Frequency Data</option>
		<option value="voice">Voice Grant (Python)</option>
		<option value="display">Main Display</option>		
	  </select>
	</div>

      <div style="margin-bottom: 15px;">
        <label for="smartColorToggle" style="color: #ccc;">
          <input type="checkbox" id="smartColorToggle" checked>
          Enable Smart Colors
        </label>
      </div>

      <div style="margin-bottom: 10px; color: #ccc;">
        Stream URL: <span id="streamURL">None</span>
      </div>

      <hr style="margin: 10px 0;">

      <div id="div_debug" style="font-size: 0.8em;">
        <strong>Debug Log</strong>
      </div>

    </td>
  </tr>
</table>

  <table class="outer-table">
    <tr>
      <!-- Left panel: vertical buttons --> 
      <td class="left-panel">
        <button class="button-3d" onclick="f_scan_button('skip'); this.blur();">SCAN</button> <br>
        <button class="button-3d" id="btn-hold" onclick="f_scan_button('hold'); this.blur();">HOLD</button><br>
        <button class="button-3d" onclick="f_scan_button('lockout'); this.blur();">LOCKOUT</button><br>
        <button class="button-3d" onclick="f_scan_button('goto'); this.blur();">GO TO</button><br>
      </td>
      <!-- Main info area -->
      <td class="main-info">
        <table class="inner-table table-gradient-bg">
          <tr>
            <td><span class="info-large" id="displaySystem">Waiting for data...</span></td>
            <td style="text-align:center;"><span class="small-label">Frequency</span><br> <span class="trunk-value" id="displayFreq">----</span></td>
          </tr>
          <tr>
            <td><span class="info-large" id="displayTalkgroup"> </span></span></td>
           <td style="text-align:center;"><span class="small-label">Talkgroup</span><br><span class="trunk-value" id="displayTgid">----</span></td>
          </tr>
          <tr>
            <td><span class="info-large" id="displaySource"> </span></td>
            <td style="text-align:center;"><span class="small-label">Source</span><br><span class="trunk-value"id="displaySourceId">----</span></td>
          </tr>
          <tr>
            <td colspan=2 style="padding-top:8px; padding-bottom:8px; text-align:center;">
            
            <span class="small-label">Encryption: </span><span class="small-value" id="displayEnc">-</span> &nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <span class="small-label">Emergency: </span><span class="small-value" id="displayEmg">-</span> &nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <span class="small-label">Service: </span> <span class="small-value" id="displayService">-</span>
            
            </td>
          </tr>

        </table>
      </td>
      <!-- Right panel: logo area -->
      <td class="right-logo">

      <span class="small-label">Channel</span><br>
      <span class="small-value" id="displayChannel">channel</span><br>
      		<div class="s2_cell_e" id="s2_ch_dn" style="display:none;"> 		
      		<input type="button" class="tune-button" name="c_dn" id="s2_ch_dn" value="-" title="Prev Channel" onclick="javascript:f_chan_button(-1);">
      		<input type="button" class="tune-button" name="c_up" id="s2_ch_up" value="+" title="Next Channel" onclick="javascript:f_chan_button(1);">
      		
		<br>
		
		<span id='streamButton'> </span> <!-- This will be a speaker icon with link when the c_stream_url is present -->
		<br>
		
      <span class="small-label">Tuning</span><br>
      <input type="button" class="tune-button" id="t2_D" name="" onclick="f_tune_button(-1200)" value="&lt;&lt;">
      <input type="button" class="tune-button" id="t2_d" name="" onclick="f_tune_button(-100)" value="&lt;">
      <input type="button" class="tune-button" id="t2_u" name="" onclick="f_tune_button(100)"value="&gt;">
      <input type="button" class="tune-button" id="t2_U" name="" onclick="f_tune_button(1200)" value="&gt;&gt;">
      <br>
      <span class="small-label">Error: </span> <span class="small-value" id="errorVal">-</span>
      
      </td>
    </tr>
    <!-- Bottom row: preset buttons -->
    <tr>
      <td colspan="3" class="bottom-buttons">
		  <button id="preset-btn-1" class="" onclick="f_preset(1)">Preset 1</button>
		  <button id="preset-btn-2" class="" onclick="f_preset(2)">Preset 2</button>
		  <button id="preset-btn-3" class="" onclick="f_preset(3)">Preset 3</button>
		  <button id="preset-btn-4" class="" onclick="f_preset(4)">Preset 4</button>
		  <button id="preset-btn-5" class="" onclick="f_preset(5)">Preset 5</button>
		  <button id="preset-btn-6" class="" onclick="f_preset(6)">Preset 6</button>   
      </td>
    </tr>
  </table>

      <table class="outer-table">
		<tr>
		<td>
		<div id="frequenciesTable">
		</div>
      </table>
        
      <table class="outer-table" id='adjacentSitesContainer'>
		<tr>
		<td>
		<div id="adjacentSitesTable">
		</div>
      </table>
      
      <table class="outer-table" id="patchesContainer">
		<tr>
		<td>
		<div id="patchesTable">
		</div>
      </table>            
      
</div>   <!-- END FIRST COLUMN -->


<!-- START SECOND COLUMN -->   
  <div class="column" id="second-column" style="margin: 0px 0px 0px 0px;">
		<table class="outer-table" id="callHistoryContainer">
		<tr><th class="th-section" id="callHistoryTableTitle">Call History</th></tr>
		  <tr>
			<td>
			  <div class="call-history-scroll">
				<table class="compact-table" id="callHistory">
				  <thead>
				    <tr><th>Time</th><th>Sys</th><th>Frequency</th><th colspan=2>Talkgroup</th><th>Source</th></tr>
<!-- 					<tr><th>Time</th><th>Sys</th><th>Mode</th><th colspan=2>Talkgroup</th><th>Source</tr> -->
				  </thead>
				  <tbody id="callHistoryBody">
					<!-- JavaScript will insert <tr> rows here -->
				  </tbody>
				</table>
			  </div>
			</td>
		  </tr>
		</table>
		
      <table class="outer-table" id="plot-container" style="display: none;">
		<tr><th class="th-section">Plots</th></tr>
		  <tr>
			<td>

				<div id="plot-controls" style="text-align:center; width: 100%;">
					<input type="button" class="small-button" name="pl1" id="pb-fft" value="Spectrum" title="Toggle Spectrum Plot" onclick="javascript:f_plot_button(1);">
					<input type="button" class="small-button" name="pl2" id="pb-constellation" value="Constellation" title="Toggle Constellation Plot" onclick="javascript:f_plot_button(2);">
					<input type="button" class="small-button" name="pl3" id="pb-symbol" value="Symbol" title="Toggle Symbol Plot" onclick="javascript:f_plot_button(3);">
					<input type="button" class="small-button" name="pl4" id="pb-eye" value="Datascope" title="Toggle Datascope Plot" onclick="javascript:f_plot_button(4);">
					<input type="button" class="small-button" name="pl5" id="pb-mixer" value="Mixer" title="Toggle Mixer Plot" onclick="javascript:f_plot_button(5);">
					<input type="button" class="small-button" name="pl6" id="pb-fll" value="Tuner" title="Toggle Tuner Plot" onclick="javascript:f_plot_button(6);">
				<br>
					<span class="small-label">Plots in data stream: </span> <span class="small-value" id="plotsCount">-</span> &nbsp;&nbsp;&nbsp;&nbsp;
					<span class="small-label">Channel: </span> <span class="small-value" id="plotChannelDisplay">-</span>
				</div> 

				
				<div id="div_plot" style="display: block; text-align:center; width: 100%;">
					<img src="1x1.png" class="plot-image" id="img0" style="display:; none" alt="plot">
					<img src="1x1.png" class="plot-image" id="img1" style="display:; none" alt="plot">
					<img src="1x1.png" class="plot-image" id="img2" style="display:; none" alt="plot">
					<img src="1x1.png" class="plot-image" id="img3" style="display:; none" alt="plot">
					<img src="1x1.png" class="plot-image" id="img4" style="display:; none" alt="plot">
					<img src="1x1.png" class="plot-image" id="img5" style="display:; none" alt="plot">
				</div>
			</td>
		  </tr>
		</table>
		



</div>    <!-- END SECOND COLUMN -->
</div>        <!--  END OF 2 COLUMN LAYOUT -->
</body>
</html>
